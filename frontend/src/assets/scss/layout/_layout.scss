@use '../utils/variables' as vars;
@use '../utils/mixins' as mix;
@use 'sass:math';

/* Layout System */

/* Container */
.container {
  width: 100%;
  padding-right: vars.$spacing-md;
  padding-left: vars.$spacing-md;
  margin-right: auto;
  margin-left: auto;
  
  @include mix.tablet-up {
    max-width: 768px;
  }
  
  @include mix.desktop-up {
    max-width: 1140px;
  }
  
  &-fluid {
    width: 100%;
    padding-right: vars.$spacing-md;
    padding-left: vars.$spacing-md;
    margin-right: auto;
    margin-left: auto;
  }
  
  &-sm {
    max-width: 540px;
  }
  
  &-md {
    max-width: 720px;
  }
  
  &-lg {
    max-width: 960px;
  }
  
  &-xl {
    max-width: 1140px;
  }
}

/* Grid System */
.row {
  display: flex;
  flex-wrap: wrap;
  margin-right: -(vars.$spacing-sm);
  margin-left: -(vars.$spacing-sm);
  
  &-no-gutters {
    margin-right: 0;
    margin-left: 0;
    
    > .col,
    > [class*="col-"] {
      padding-right: 0;
      padding-left: 0;
    }
  }
}

.col {
  flex-basis: 0;
  flex-grow: 1;
  max-width: 100%;
  padding-right: vars.$spacing-sm;
  padding-left: vars.$spacing-sm;
}

@for $i from 1 through 12 {
  .col-#{$i} {
    flex: 0 0 math.percentage(math.div($i, 12));
    max-width: math.percentage(math.div($i, 12));
    padding-right: vars.$spacing-sm;
    padding-left: vars.$spacing-sm;
  }
}

/* Responsive Grid Columns */
@include mix.mobile {
  @for $i from 1 through 12 {
    .col-xs-#{$i} {
      flex: 0 0 math.percentage(math.div($i, 12));
      max-width: math.percentage(math.div($i, 12));
    }
  }
}

@include mix.tablet-up {
  @for $i from 1 through 12 {
    .col-sm-#{$i} {
      flex: 0 0 math.percentage(math.div($i, 12));
      max-width: math.percentage(math.div($i, 12));
    }
  }
}

@include mix.respond-to(md) {
  @for $i from 1 through 12 {
    .col-md-#{$i} {
      flex: 0 0 math.percentage(math.div($i, 12));
      max-width: math.percentage(math.div($i, 12));
    }
  }
}

@include mix.desktop-up {
  @for $i from 1 through 12 {
    .col-lg-#{$i} {
      flex: 0 0 math.percentage(math.div($i, 12));
      max-width: math.percentage(math.div($i, 12));
    }
  }
}

@include mix.respond-to(xl) {
  @for $i from 1 through 12 {
    .col-xl-#{$i} {
      flex: 0 0 math.percentage(math.div($i, 12));
      max-width: math.percentage(math.div($i, 12));
    }
  }
}

/* Page Sections */
.section {
  padding: vars.$spacing-xl 0;
  
  @include mix.mobile {
    padding: vars.$spacing-lg 0;
  }
  
  &-sm {
    padding: vars.$spacing-lg 0;
    
    @include mix.mobile {
      padding: vars.$spacing-md 0;
    }
  }
  
  &-lg {
    padding: vars.$spacing-2xl 0;
    
    @include mix.mobile {
      padding: vars.$spacing-xl 0;
    }
  }
}

/* Fixed Header Space */
.header-space {
  padding-top: 64px; /* Adjust based on your header height */
  
  @include mix.mobile {
    padding-top: 56px; /* Smaller on mobile */
  }
}

/* App Main Content */
.main-content {
  min-height: calc(100vh - 120px); /* Adjust based on header + footer height */
  display: flex;
  flex-direction: column;
}

/* Panel Layout */
.panel {
  @include mix.glass-morphism;
  padding: vars.$spacing-lg;
  margin-bottom: vars.$spacing-lg;
  
  @include mix.mobile {
    padding: vars.$spacing-md;
    margin-bottom: vars.$spacing-md;
  }
  
  &-header {
    margin-bottom: vars.$spacing-md;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding-bottom: vars.$spacing-sm;
  }
  
  &-body {
    margin-bottom: vars.$spacing-md;
  }
  
  &-footer {
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    padding-top: vars.$spacing-sm;
  }
}

/* Dashboard Grid */
.dashboard-grid {
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  grid-gap: vars.$spacing-md;
  
  @include mix.mobile {
    grid-template-columns: 1fr;
    grid-gap: vars.$spacing-sm;
  }
  
  &__item {
    @include mix.glass-morphism;
    
    &--full {
      grid-column: span 12;
    }
    
    &--half {
      grid-column: span 6;
      
      @include mix.mobile {
        grid-column: span 12;
      }
    }
    
    &--third {
      grid-column: span 4;
      
      @include mix.mobile {
        grid-column: span 12;
      }
    }
    
    &--quarter {
      grid-column: span 3;
      
      @include mix.mobile {
        grid-column: span 6;
      }
      
      @media (max-width: 480px) {
        grid-column: span 12;
      }
    }
  }
}

/* Split Layout */
.split-layout {
  display: flex;
  
  @include mix.mobile {
    flex-direction: column;
  }
  
  &__main {
    flex: 1 1 70%;
    padding-right: vars.$spacing-lg;
    
    @include mix.mobile {
      padding-right: 0;
      padding-bottom: vars.$spacing-md;
    }
  }
  
  &__sidebar {
    flex: 0 0 30%;
    
    @include mix.mobile {
      flex: 1 1 auto;
    }
  }
}

/* App Shell Layout */
.app-shell {
  display: grid;
  grid-template-areas:
    "header header"
    "sidebar main"
    "footer footer";
  grid-template-columns: auto 1fr;
  grid-template-rows: auto 1fr auto;
  min-height: 100vh;
  
  @include mix.mobile {
    grid-template-areas:
      "header"
      "main"
      "footer";
    grid-template-columns: 1fr;
  }
  
  &__header {
    grid-area: header;
    position: sticky;
    top: 0;
    z-index: vars.$z-index-fixed;
  }
  
  &__sidebar {
    grid-area: sidebar;
    width: 250px;
    
    @include mix.mobile {
      display: none;
      position: fixed;
      left: 0;
      top: 56px; /* Header height */
      bottom: 0;
      z-index: vars.$z-index-fixed - 1;
      width: 80%;
      max-width: 300px;
      
      &.active {
        display: block;
      }
    }
  }
  
  &__main {
    grid-area: main;
    padding: vars.$spacing-md;
    overflow-x: hidden;
  }
  
  &__footer {
    grid-area: footer;
  }
} 